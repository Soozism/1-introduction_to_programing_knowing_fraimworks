# معرفی Kubernetes

Kubernetes (یا K8s) یک پلتفرم منبع باز برای مدیریت کانتینرها و اجرای اپلیکیشن‌های مقیاس‌پذیر در محیط‌های کلاستر است. این سیستم توسط Google توسعه داده شده و اکنون تحت حمایت Cloud Native Computing Foundation (CNCF) قرار دارد. Kubernetes به سازمان‌ها کمک می‌کند تا اپلیکیشن‌های خود را به طور مؤثر و خودکار در محیط‌های ابری و محلی مدیریت کنند و مقیاس‌پذیری، در دسترس‌پذیری و مقیاس‌پذیری را برای اپلیکیشن‌های کانتینری فراهم می‌آورد.

## ویژگی‌های اصلی Kubernetes

### 1. **مدیریت خودکار بار (Auto-Scaling)**
Kubernetes به شما امکان می‌دهد که منابع کلاستر را به طور خودکار بر اساس نیازهای بار کاری افزایش یا کاهش دهید. این قابلیت شامل مقیاس‌پذیری خودکار افقی (Horizontal Pod Autoscaling) و مقیاس‌پذیری خودکار عمودی (Vertical Pod Autoscaling) است.

### 2. **استقرار و مدیریت خودکار (Automated Deployment and Management)**
Kubernetes از مکانیزم‌های استقرار خودکار استفاده می‌کند که به شما این امکان را می‌دهد که تغییرات در اپلیکیشن‌های خود را به راحتی پیاده‌سازی کنید. ابزارهایی مانند Deployments و StatefulSets به مدیریت و استقرار کانتینرها کمک می‌کنند و قابلیت‌هایی برای مدیریت نسخه‌ها و به‌روزرسانی‌ها فراهم می‌آورند.

### 3. **خودترمیمی (Self-Healing)**
Kubernetes قابلیت خودترمیمی دارد که به طور خودکار اپلیکیشن‌های آسیب‌دیده یا کانتینرهای معیوب را بازسازی و راه‌اندازی مجدد می‌کند. اگر یک پاد (Pod) از کار بیافتد، Kubernetes به طور خودکار یک پاد جدید ایجاد می‌کند تا اطمینان حاصل شود که اپلیکیشن به درستی در حال اجرا است.

### 4. **بارگذاری تعادل (Load Balancing)**
Kubernetes به طور خودکار بار درخواست‌ها را بین پادها توزیع می‌کند تا اطمینان حاصل شود که منابع به طور بهینه استفاده می‌شوند و هیچ پادی تحت فشار زیاد قرار نمی‌گیرد. این قابلیت شامل بارگذاری تعادل داخلی و خارجی است.

### 5. **مدیریت پیکربندی و رازها (Configuration and Secrets Management)**
Kubernetes ابزارهایی برای مدیریت پیکربندی و داده‌های حساس ارائه می‌دهد. ConfigMaps و Secrets به شما این امکان را می‌دهند که پیکربندی‌ها و اطلاعات حساس مانند رمزهای عبور و کلیدهای API را به طور امن مدیریت کنید.

### 6. **پشتیبانی از شبکه‌سازی و ذخیره‌سازی (Networking and Storage)**
Kubernetes شامل ابزارهایی برای مدیریت شبکه‌سازی و ذخیره‌سازی است که به شما امکان می‌دهد تا شبکه داخلی کلاستر و همچنین پیوند به منابع ذخیره‌سازی خارجی را به راحتی مدیریت کنید. Kubernetes از Volume ها و Persistent Volumes برای مدیریت داده‌های پایدار استفاده می‌کند.

### 7. **قابلیت مشاهده و نظارت (Observability and Monitoring)**
Kubernetes با ابزارهایی مانند Prometheus، Grafana و ELK Stack (Elasticsearch, Logstash, Kibana) برای نظارت و مشاهده (Observability) یکپارچه است. این ابزارها به شما کمک می‌کنند تا وضعیت و عملکرد کلاستر و اپلیکیشن‌های خود را نظارت کنید و مشکلات را سریع‌تر شناسایی کنید.

## شروع به کار با Kubernetes

### نصب Kubernetes
برای شروع کار با Kubernetes، می‌توانید از Minikube برای ایجاد یک کلاستر محلی استفاده کنید یا از خدمات ابری مانند Google Kubernetes Engine (GKE)، Azure Kubernetes Service (AKS)، یا Amazon Elastic Kubernetes Service (EKS) استفاده کنید. نصب Minikube به صورت زیر انجام می‌شود:

```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
sudo install minikube-darwin-amd64 /usr/local/bin/minikube
```

سپس کلاستر Minikube را راه‌اندازی کنید:

```bash
minikube start
```

### تعریف و استقرار اپلیکیشن‌ها
برای استقرار اپلیکیشن‌ها در Kubernetes، باید فایل‌های YAML تعریف کنید که مشخصات پادها، سرویس‌ها و منابع دیگر را شامل می‌شود. به عنوان مثال، فایل `deployment.yaml` زیر یک Deployment ساده را تعریف می‌کند:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
      - name: my-app-container
        image: my-app-image:latest
        ports:
        - containerPort: 80
```

برای اعمال این فایل و استقرار اپلیکیشن، از دستور زیر استفاده کنید:

```bash
kubectl apply -f deployment.yaml
```

### مشاهده وضعیت و لاگ‌ها
برای مشاهده وضعیت پادها و سرویس‌ها در کلاستر، می‌توانید از دستورات زیر استفاده کنید:

```bash
kubectl get pods
kubectl get services
```

برای مشاهده لاگ‌های پادها، از دستور زیر استفاده کنید:

```bash
kubectl logs <pod-name>
```

### مدیریت منابع
Kubernetes ابزارهایی برای مدیریت منابع مختلف مانند پادها، سرویس‌ها، و ConfigMaps فراهم می‌آورد. می‌توانید منابع را با استفاده از دستورات `kubectl` مدیریت کنید، مانند:

```bash
kubectl delete -f deployment.yaml
kubectl describe pod <pod-name>
```

### استقرار و مقیاس‌پذیری
برای استقرار و مقیاس‌پذیری اپلیکیشن‌ها، می‌توانید از ویژگی‌های Kubernetes مانند Deployments، StatefulSets و Horizontal Pod Autoscaling استفاده کنید. به عنوان مثال، برای مقیاس‌پذیری افقی پادها، می‌توانید دستور زیر را استفاده کنید:

```bash
kubectl scale deployment my-app --replicas=5
```

## مزایای استفاده از Kubernetes

- **مدیریت خودکار:** Kubernetes امکانات خودکار برای مقیاس‌پذیری، استقرار و تعمیر خودکار پادها را فراهم می‌آورد.

- **انعطاف‌پذیری و مقیاس‌پذیری:** Kubernetes به راحتی مقیاس‌پذیری اپلیکیشن‌ها را از طریق اضافه کردن یا کاهش تعداد پادها مدیریت می‌کند.

- **مدیریت ساده:** ابزارهای Kubernetes برای مدیریت پیکربندی، ذخیره‌سازی و شبکه‌سازی فرآیندهای پیچیده را ساده می‌کنند.

- **نظارت و مشاهده:** Kubernetes از ابزارهای پیشرفته برای نظارت و مشاهده وضعیت کلاستر و اپلیکیشن‌ها پشتیبانی می‌کند.

- **پشتیبانی از منابع ابری و محلی:** Kubernetes به شما این امکان را می‌دهد که اپلیکیشن‌های خود را در محیط‌های ابری و محلی به طور مؤثر مدیریت کنید.

- **پشتیبانی از ابزارهای توسعه و استقرار:** Kubernetes با ابزارهای مختلفی برای توسعه و استقرار مانند Helm، Kustomize و CI/CD یکپارچه می‌شود.

Kubernetes به عنوان یک پلتفرم پیشرفته برای مدیریت کانتینرها و اپلیکیشن‌های مقیاس‌پذیر، به سازمان‌ها کمک می‌کند تا به راحتی اپلیکیشن‌های خود را در مقیاس بزرگ مدیریت کنند و فرآیندهای توسعه و استقرار را بهینه کنند.